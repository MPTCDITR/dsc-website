---
import Card from "./Card.astro";
import type { SupportedLanguage } from "@/i18n/ui";
import { removeLanguagePrefix } from "@/i18n/utils";
import type { CollectionEntry } from "astro:content";
import { getRelativeLocaleUrl } from "astro:i18n";

interface Props {
  articles: CollectionEntry<"articles">[];
  lang: SupportedLanguage;
}

const { articles, lang } = Astro.props;

const getArticleUrl = (slug: string) =>
  getRelativeLocaleUrl(lang, `articles/${removeLanguagePrefix(slug, lang)}`);
---

<div class="grid grid-cols-1 gap-5 p-5 md:grid-cols-3 lg:grid-cols-4">
  {
    articles.map((article) => (
      <Card
        image={article.data.image}
        title={article.data.title}
        body={article.body}
        href={getArticleUrl(article.slug)}
        date={article.data.date}
      />
    ))
  }
</div>
